<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Add your head content here -->
</head>
<body>
<header class="header" th:fragment="header">
    <div class="header-middle">
        <div class="container">
            <div class="header-left col-lg-2 w-auto pl-0">
                <button class="mobile-menu-toggler text-primary mr-2" type="button">
                    <i class="icon-menu"></i>
                </button>
                <a href="/" class="logo">
                    <img th:src="@{https://static.vecteezy.com/system/resources/previews/023/606/821/non_2x/shoes-logo-design-sneakers-logo-design-vector.jpg}" alt="logo">
                </a>
            </div><!-- End .header-left -->

            <div class="header-right w-lg-max">
                <div class="header-icon header-search header-search-inline header-search-category w-lg-max text-right">
                    <a href="#" class="search-toggle search-button" role="button"><i class="icon-search-3"></i></a>
                    <div class="header-search-wrapper">
                        <input class="form-control search-input" placeholder="Nhập sản phẩm cần tìm kiếm..." required>
                        <button class="btn icon-search-3 p-0 search-button" type="submit"></button>
                    </div><!-- End .header-search-wrapper -->
                </div><!-- End .header-search -->

                <div class="header-contact d-none d-lg-flex pl-4 ml-3 mr-xl-5 pr-4">
                    <img th:src="@{/shop/images/phone.png}" alt="phone" width="30" height="30" class="pb-1">
                    <h6>Hotline <a href="tel:#" class="text-dark font1">034xxxxx51</a></h6>
                </div>

                <!-- <div class="cart-wrapper">
                    <a href="/cart" class="cart-link" title="Giỏ hàng của bạn">
                        <i class="icon-shopping-cart"></i>
                        <span class="cart-count badge-circle" id="headerCartCount">0</span>
                    </a>
                </div> -->

                <a href="#" data-toggle="modal" data-target="#exampleModal" class="header-icon account-setting">
                    <i class="icon-user-2"></i>
                </a>
            </div><!-- End .header-right -->
        </div><!-- End .container -->
    </div><!-- End .header-middle -->

    <div class="header-bottom sticky-header d-none d-lg-block">
        <div class="container">
            <nav class="main-nav w-100">
                <ul class="menu">
                    <li class="active">
                        <a href="/">Trang chủ</a>
                    </li>
                    <li class="float-right mr-0"><a href="/lien-he" class="px-4">Liên hệ</a></li>
                    <li class="float-right"><a href="/doi-hang">Chính sách</a></li>
                    <li class="float-right"><a href="/tin-tuc">Tin tức</a></li>
                    <li class="float-right"><a href="/san-pham">Sản phẩm</a></li>
                    <li class="float-right"><a href="/cart" class="float-right">Xem giỏ hàng</a></li>
                    <li class="float-right"><a id="nav-link-admin" href="/admin">Admin</a></li>
                </ul>
            </nav>
        </div><!-- End .container -->
    </div><!-- End .header-bottom -->
</header><!-- End .header -->

<style>
.cart-wrapper {
    position: relative;
    display: inline-block;
    margin-left: 20px;
}

.cart-link {
    text-decoration: none;
    color: inherit;
}

.cart-link i {
    font-size: 24px;
}

.cart-count.badge-circle {
    position: absolute;
    top: -8px;
    right: -8px;
    min-width: 1.6em;
    height: 1.6em;
    padding: 0 .4em;
    line-height: 1.6em;
    border-radius: 50%;
    background-color: #ff0000;
    color: #fff;
    font-size: 10px;
    font-weight: 600;
    text-align: center;
}
</style>

<script>
function updateCartCount() {
    fetch('/api/cart/summary')
    .then(response => response.json())
    .then(data => {
        document.getElementById('headerCartCount').textContent = data.totalItems || 0;
    })
    .catch(error => {
        console.error('Error:', error);
        document.getElementById('headerCartCount').textContent = '0';
    });
}

// Cập nhật khi trang được tải
document.addEventListener('DOMContentLoaded', updateCartCount);

// Cập nhật khi có thay đổi trong giỏ hàng
document.addEventListener('cartUpdated', updateCartCount);
</script>
</body>
</html>
